<!DOCTYPE html>
<html>
<head>
<title>AI Learning - DSA Mentor Pro</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:Poppins;
}

body{
background:#020617;
color:white;
overflow:hidden;
}

/* animated bg */
body::before{
content:"";
position:fixed;
width:200%;
height:200%;
background:
radial-gradient(circle at 20% 30%,#0ea5e9,transparent),
radial-gradient(circle at 80% 70%,#22c55e,transparent),
radial-gradient(circle at 50% 50%,#9333ea,transparent);
opacity:0.15;
animation:moveBg 18s linear infinite;
z-index:-1;
}

@keyframes moveBg{
0%{transform:translate(0,0);}
50%{transform:translate(-10%,-10%);}
100%{transform:translate(0,0);}
}

.container{
width:90%;
max-width:900px;
margin:auto;
padding-top:30px;
}

h2{
font-family:Orbitron;
font-size:32px;
text-align:center;
background:linear-gradient(90deg,#38bdf8,#22c55e,#9333ea);
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
margin-bottom:8px;
}

.subtitle{
text-align:center;
color:#38bdf8;
margin-bottom:18px;
}

/* chat box */
#chatbox{
height:450px;
overflow-y:auto;
background:rgba(255,255,255,0.04);
border:1px solid rgba(255,255,255,0.08);
padding:20px;
border-radius:20px;
backdrop-filter:blur(10px);
box-shadow:0 0 20px rgba(0,0,0,0.5);
}

/* messages */
.msg{
margin-top:14px;
padding:12px 16px;
border-radius:12px;
max-width:80%;
line-height:1.6;
white-space:pre-line;
}

.user{
background:#22c55e;
color:black;
margin-left:auto;
text-align:right;
}

.ai{
background:#0ea5e9;
color:black;
margin-right:auto;
}

/* input area */
.inputArea{
display:flex;
gap:10px;
margin-top:15px;
}

input{
flex:1;
padding:14px;
border-radius:12px;
border:none;
background:#020617;
color:white;
border:1px solid #1e293b;
}

button{
padding:12px 22px;
border:none;
border-radius:20px;
background:linear-gradient(90deg,#38bdf8,#22c55e);
font-weight:600;
cursor:pointer;
}

button:hover{
transform:scale(1.05);
}

.back{
margin-top:15px;
background:#ef4444;
}

</style>
</head>

<body>

<div class="container">

<h2>ðŸ“š AI Learning Mode</h2>
<p class="subtitle">Ask any DSA doubt (Array, Stack, DP, Graph, Tree etc)</p>

<div id="chatbox">
<div class="msg ai">Hello ðŸ‘‹ I'm your AI DSA mentor. Ask anything.</div>
</div>

<div class="inputArea">
<input type="text" id="userInput" placeholder="Ask your DSA doubt...">
<button onclick="sendMessage()">Send</button>
</div>

<button class="back" onclick="window.location.href='/dashboard'">â¬… Dashboard</button>

</div>

<script>

function addMessage(text,cls){
let box=document.getElementById("chatbox");
let div=document.createElement("div");
div.className="msg "+cls;
div.innerHTML=text;
box.appendChild(div);
box.scrollTop=box.scrollHeight;
}

function sendMessage(){
let input=document.getElementById("userInput").value.trim();
if(input==="") return;

addMessage(input,"user");

fetch("/ask",{
method:"POST",
headers:{"Content-Type":"application/json"},
body:JSON.stringify({message:input})
})
.then(res=>res.json())
.then(data=>{
let formatted=data.reply.replace(/\n/g,"<br><br>");
addMessage(formatted,"ai");
});

document.getElementById("userInput").value="";
}

document.getElementById("userInput")
.addEventListener("keypress",function(e){
if(e.key==="Enter") sendMessage();
});

</script>

</body>
</html>
